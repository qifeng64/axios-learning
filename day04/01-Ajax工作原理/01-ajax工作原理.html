<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /* 
      1. http协议 :  网络传输协议
        * 协议 : 规定网络数据传输的格式
        
      2. http协议组成 :  请求报文 + 响应报文
        * 浏览器发请求（发给服务器的格式） ： 请求报文 
        * 服务器响应（响应给浏览器的格式） ： 响应报文 

      3. 请求报文 由三部分组成
        3.1 请求行 :  请求方法 + 请求地址
        3.2 请求头 :  浏览器告诉服务器,我发送给你的数据是什么格式 (文本、json、图片、音视频等等)
        3.3 请求体 :  请求参数  Payload

      4. 响应报文 由三部分组成
        4.1 响应行 :  服务器（响应）状态码、 服务器地址等
          2xx : 请求成功
            200：请求成功
            204：一般出现在post请求，表示数据继续传输  
          3xx : 重定向 
            302：服务端重定向(服务器主动修改浏览器网址)
          4xx : 前端的问题
            404：url错误    
            400: 参数错误   
            403：没有权限（没有登录）  402 : 没有权限（登录到期）
            405：请求方法错误
          5xx : 服务器的问题  
            500：服务器挂了(后台java代码像js一样爆红了)
        4.2 响应头 :  服务器告诉浏览器，我响应给你的数据是什么格式 (文本、json、图片、音视频等等)
        4.3 响应体 :  服务器响应数据
      
      5.ajax原理 ： 设置请求报文过程
        * 给服务器发请求，其实发的就是请求报文
      */

      //(1).实例化ajax对象
      let xhr = new XMLHttpRequest();
      //请求未初始化
      console.log(xhr.readyState); //0

      //(2).设置请求方法和地址(请求行)
      xhr.open("post", "http://www.liulongbin.top:3009/api/login");
      //服务器连接已建立
      console.log(xhr.readyState); //1

      //(3).设置请求头（post请求才需要设置）
      xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      //(4).发送请求 ： 参数格式  'key=value'
      xhr.send("username=admin&password=123456");

      //(5).注册回调函数
      xhr.onreadystatechange = function () {
        console.log(xhr.readyState); //2 3 4

        //当readyState为4,表示响应数据了
        if (xhr.readyState == 4) {
          console.log(xhr.response);
        }
      };
    </script>
  </body>
</html>
